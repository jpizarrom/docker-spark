spark-yarn-master:
  image: 'jpizarrom/spark-yarn:1.6.0-master'
  command: '-d'
  mem_limit: 1024m
  environment:
    - SPARK_PUBLIC_DNS=$DOCKERCLOUD_CONTAINER_FQDN
    - SPARK_MASTER_PORT=7077
    - SPARK_MASTER_WEBUI_PORT=8080
    - SPARK_WORKER_PORT=8888
    - SPARK_WORKER_WEBUI_PORT=8081
    - YARN_RESOURCEMANAGER_HEAPSIZE=256
    - YARN_PROXYSERVER_HEAPSIZE=128
    - YARN_NODEMANAGER_HEAPSIZE=256
    - HADOOP_JOB_HISTORYSERVER_HEAPSIZE=256
    - HADOOP_NAMENODE_HEAPSIZE=256
    - HADOOP_DATANODE_HEAPSIZE=128
  hostname: sandbox
  ports:
    - '4040'
    - '8042:8042'
    - '8080'
    - '8088:8088'
    - '8081'
    - '50070:50070'

spark-yarn-nodemanager:
  image: 'jpizarrom/spark-yarn:1.6.0-nodemanager'
  command: '-d'
  mem_limit: 1024m
  environment:
    - SPARK_PUBLIC_DNS=$DOCKERCLOUD_CONTAINER_FQDN
    - SPARK_MASTER_PORT=7077
    - SPARK_MASTER_WEBUI_PORT=8080
    - SPARK_WORKER_PORT=8888
    - SPARK_WORKER_WEBUI_PORT=8081
    - YARN_RESOURCEMANAGER_HEAPSIZE=256
    - YARN_PROXYSERVER_HEAPSIZE=128
    - YARN_NODEMANAGER_HEAPSIZE=256
    - HADOOP_JOB_HISTORYSERVER_HEAPSIZE=256
    - HADOOP_NAMENODE_HEAPSIZE=256
    - HADOOP_DATANODE_HEAPSIZE=128
  extra_hosts:
    - 'sandbox:172.17.0.6'
  ports:
    - '4040'
    - '8042'
    - '8080'
    - '8081'
  target_num_containers: 2

spark-yarn-client:
  image: 'jpizarrom/spark-yarn:1.6.0-client'
  command: '-d'
  mem_limit: 1024m
  environment:
    - SPARK_PUBLIC_DNS=$DOCKERCLOUD_CONTAINER_FQDN
    - SPARK_MASTER_PORT=7077
    - SPARK_MASTER_WEBUI_PORT=8080
    - SPARK_WORKER_PORT=8888
    - SPARK_WORKER_WEBUI_PORT=8081
    - YARN_RESOURCEMANAGER_HEAPSIZE=256
    - YARN_PROXYSERVER_HEAPSIZE=128
    - YARN_NODEMANAGER_HEAPSIZE=256
    - HADOOP_JOB_HISTORYSERVER_HEAPSIZE=256
    - HADOOP_NAMENODE_HEAPSIZE=256
    - HADOOP_DATANODE_HEAPSIZE=128
  extra_hosts:
    - 'sandbox:172.17.0.6'
  ports:
    - '4040'
    - '8042'
    - '8080'
    - '8081'

spark-yarn-zeppelin:
  image: 'jpizarrom/spark-yarn:1.6.0-zeppelin'
  # command: '-d'
  mem_limit: 3072m
  environment:
    - SPARK_PUBLIC_DNS=$DOCKERCLOUD_CONTAINER_FQDN
    - SPARK_MASTER_PORT=7077
    - SPARK_MASTER_WEBUI_PORT=8080
    - SPARK_WORKER_PORT=8888
    - SPARK_WORKER_WEBUI_PORT=8081
    - YARN_RESOURCEMANAGER_HEAPSIZE=256
    - YARN_PROXYSERVER_HEAPSIZE=128
    - YARN_NODEMANAGER_HEAPSIZE=256
    - HADOOP_JOB_HISTORYSERVER_HEAPSIZE=256
    - HADOOP_NAMENODE_HEAPSIZE=256
    - HADOOP_DATANODE_HEAPSIZE=128
  extra_hosts:
    - 'sandbox:172.17.0.6'
  ports:
    - '4040'
    - '8042'
    - '8080'
    - '8081'
    - '8082'
